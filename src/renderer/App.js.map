{"version":3,"file":"App.js","sourceRoot":"","sources":["App.tsx"],"names":[],"mappings":"AAAA,OAAO,KAAK,EAAE,EAA4B,SAAS,EAAE,QAAQ,EAAE,MAAM,EAAE,MAAM,OAAO,CAAC;AACrF,OAAO,KAAK,MAAM,SAAS,CAAC;AAC5B,OAAO,IAAI,MAAM,QAAQ,CAAC;AAC1B,OAAO,EAAE,WAAW,EAAE,KAAK,EAAE,MAAM,UAAU,CAAC;AAE9C,OAAO,QAAQ,MAAM,qBAAqB,CAAC;AAC3C,OAAO,aAAa,EAAE,EAAE,UAAU,EAAE,eAAe,EAAE,MAAM,0BAA0B,CAAC;AACtF,OAAO,EAAE,gBAAgB,EAAE,eAAe,EAAE,kBAAkB,EAAE,mBAAmB,EAAE,MAAM,YAAY,CAAC;AACxG,OAAO,EAAE,aAAa,EAAS,oBAAoB,EAAE,MAAM,sBAAsB,CAAC;AAClF,OAAO,UAAU,MAAM,wBAAwB,CAAC;AAChD,OAAO,EAEN,kBAAkB,EAClB,WAAW,EACX,mBAAmB,EACnB,eAAe,GACf,MAAM,wBAAwB,CAAC;AAChC,OAAO,KAAK,MAAM,SAAS,CAAC;AAC5B,OAAO,YAAY,MAAM,8BAA8B,CAAC;AACxD,OAAO,gBAAgB,MAAM,kCAAkC,CAAC;AAChE,OAAO,SAAS,MAAM,2BAA2B,CAAC;AAClD,OAAO,UAAU,MAAM,0BAA0B,CAAC;AAClD,OAAO,MAAM,MAAM,sBAAsB,CAAC;AAC1C,OAAO,cAAc,MAAM,8BAA8B,CAAC;AAC1D,OAAO,WAAW,MAAM,2BAA2B,CAAC;AACpD,OAAO,aAAa,MAAM,6BAA6B,CAAC;AACxD,OAAO,iBAAiB,MAAM,iCAAiC,CAAC;AAChE,OAAO,aAAa,MAAM,6BAA6B,CAAC;AACxD,OAAO,MAAM,MAAM,sBAAsB,CAAC;AAC1C,OAAO,WAAW,MAAM,cAAc,CAAC;AACvC,OAAO,EAAE,kBAAkB,EAAE,MAAM,wBAAwB,CAAC;AAC5D,OAAO,QAAQ,MAAM,WAAW,CAAC;AACjC,OAAO,iBAAiB,CAAC;AACzB,OAAO,qCAAqC,CAAC;AAC7C,OAAO,2BAA2B,CAAC;AACnC,OAAO,EAAE,oBAAoB,EAAE,MAAM,yBAAyB,CAAC;AAC/D,OAAO,iBAAiB,CAAC;AACzB,OAAO,EAAE,cAAc,EAAE,MAAM,eAAe,CAAC;AAU/C,IAAI,UAAU,GAAG,EAAE,CAAC;AACpB,IAAI,OAAO,MAAM,KAAK,WAAW,IAAI,MAAM,CAAC,QAAQ,EAAE;IACrD,MAAM,KAAK,GAAG,IAAI,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;IACvE,UAAU,GAAG,IAAI,GAAG,KAAK,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;CAC/C;AAED,MAAM,SAAS,GAAG,UAAU,CAAC,GAAG,EAAE,CAAC,CAAC;IACnC,IAAI,EAAE;QACL,QAAQ,EAAE,UAAU;QACpB,KAAK,EAAE,OAAO;QACd,MAAM,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;QACxB,eAAe,EAAE,SAAS;QAC1B,GAAG,EAAE,CAAC;QACN,eAAe,EAAE,MAAM;QACvB,MAAM,EAAE,GAAG;KACX;IACD,KAAK,EAAE;QACN,KAAK,EAAE,MAAM;QACb,SAAS,EAAE,QAAQ;QACnB,OAAO,EAAE,OAAO;QAChB,MAAM,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;QACxB,UAAU,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;QAC5B,KAAK,EAAE,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI;KACjC;IACD,MAAM,EAAE;QACP,eAAe,EAAE,SAAS;QAC1B,UAAU,EAAE,MAAM;QAClB,OAAO,EAAE,CAAC;QACV,QAAQ,EAAE,UAAU;QACpB,GAAG,EAAE,CAAC;KACN;CACD,CAAC,CAAC,CAAC;AAOJ,MAAM,WAAW,GAA4B,UAAU,EAAE,YAAY,EAAE,eAAe,EAAiB;IACtG,MAAM,OAAO,GAAG,SAAS,EAAE,CAAC;IAC5B,OAAO,CACN,6BAAK,SAAS,EAAE,OAAO,CAAC,IAAI;QAC3B,8BAAM,SAAS,EAAE,OAAO,CAAC,KAAK,EAAE,KAAK,EAAE,EAAE,UAAU,EAAE,EAAE,EAAE;;YACzC,UAAU,CACnB;QACP,oBAAC,UAAU,IACV,SAAS,EAAE,OAAO,CAAC,MAAM,EACzB,KAAK,EAAE,EAAE,IAAI,EAAE,CAAC,EAAE,EAClB,IAAI,EAAC,OAAO,EACZ,OAAO,EAAE,GAAG,EAAE,CAAC,eAAe,CAAC,CAAC,YAAY,CAAC;YAE7C,oBAAC,YAAY,IAAC,SAAS,EAAC,MAAM,GAAG,CACrB;QACb,oBAAC,UAAU,IACV,SAAS,EAAE,OAAO,CAAC,MAAM,EACzB,KAAK,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,EACnB,IAAI,EAAC,OAAO,EACZ,OAAO,EAAE,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC;YAEzC,oBAAC,gBAAgB,IAAC,SAAS,EAAC,MAAM,GAAG,CACzB;QACb,oBAAC,UAAU,IACV,SAAS,EAAE,OAAO,CAAC,MAAM,EACzB,KAAK,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,EACnB,IAAI,EAAC,OAAO,EACZ,OAAO,EAAE,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC;YAE1D,oBAAC,SAAS,IAAC,SAAS,EAAC,MAAM,GAAG,CAClB,CACR,CACN,CAAC;AACH,CAAC,CAAC;AAEF,MAAM,QAAQ,GAAG,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;AAEzC,IAAK,QAGJ;AAHD,WAAK,QAAQ;IACZ,uCAAI,CAAA;IACJ,yCAAK,CAAA;AACN,CAAC,EAHI,QAAQ,KAAR,QAAQ,QAGZ;AACD,aAAa;AACb,MAAM,CAAC,OAAO,UAAU,GAAG,CAAC,EAAE,CAAC,EAAE;IAChC,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,QAAQ,CAAW,QAAQ,CAAC,IAAI,CAAC,CAAC;IAC5D,MAAM,CAAC,SAAS,EAAE,YAAY,CAAC,GAAG,QAAQ,CAAe,EAAkB,CAAC,CAAC;IAC7E,MAAM,CAAC,YAAY,EAAE,eAAe,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;IACxD,MAAM,CAAC,OAAO,EAAE,UAAU,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC;IAC7C,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,QAAQ,CAAC,EAAE,CAAC,CAAC;IACvC,MAAM,CAAC,YAAY,EAAE,eAAe,CAAC,GAAG,QAAQ,CAAmB;QAClE,KAAK,EAAE,aAAa;KACpB,CAAC,CAAC;IACH,MAAM,YAAY,GAAG,MAAM,CAAa,oBAAoB,CAAC,CAAC;IAC9D,MAAM,gBAAgB,GAAG,MAAM,CAAS,CAAC,CAAC,CAAC;IAE3C,MAAM,CAAC,QAAQ,EAAE,WAAW,CAAC,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;IAC9D,MAAM,CAAC,iBAAiB,EAAE,oBAAoB,CAAC,GAAG,QAAQ,CAAC,QAAQ,CAAC,kBAAkB,CAAC,CAAC;IACxF,SAAS,CAAC,GAAG,EAAE;QACd,aAAa,CAAC,cAAc,CAAC,CAAC,QAAQ,EAAE,CAAC,EAAE,EAAE,GAAG,WAAW,CAAC,QAAqB,CAAC,CAAA,CAAC,CAAC,CAAC,CAAC;IACvF,CAAC,EAAE,EAAE,CAAC,CAAC;IAEP,SAAS,CAAC,GAAG,EAAE;QACd,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,kBAAkB,CAAC,2BAA2B,EAAE,YAAY,CAAC,OAAO,CAAC,CAAC;QACpH,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,kBAAkB,CAAC,uBAAuB,EAAE,aAAa,CAAC,KAAK,CAAC,CAAC;QAC/G,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,kBAAkB,CAAC,yBAAyB,EAAE,SAAS,CAAC,CAAC;IACxG,CAAC,EAAE,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC,CAAC;IAE/B,SAAS,CAAC,GAAG,EAAE;QACd,MAAM,MAAM,GAAG,CAAC,CAA4B,EAAE,MAAe,EAAE,EAAE;YAChE,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QACnD,CAAC,CAAC;QACF,MAAM,OAAO,GAAG,CAAC,CAA4B,EAAE,QAAsB,EAAE,EAAE;YACxE,YAAY,CAAC,QAAQ,CAAC,CAAC;QACxB,CAAC,CAAC;QAEF,MAAM,OAAO,GAAG,CAAC,CAA4B,EAAE,KAAa,EAAE,EAAE;YAC/D,UAAU,GAAG,KAAK,CAAC;YACnB,QAAQ,CAAC,KAAK,CAAC,CAAC;QACjB,CAAC,CAAC;QACF,MAAM,wBAAwB,GAAG,CAAC,CAA4B,EAAE,KAAuB,EAAE,EAAE;YAC1F,eAAe,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,iCAAM,GAAG,GAAK,KAAK,EAAG,CAAC,CAAC;QAClD,CAAC,CAAC;QACF,MAAM,cAAc,GAAG,CAAC,CAA4B,EAAE,MAAkB,EAAE,EAAE;YAC3E,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;YAC/B,YAAY,CAAC,OAAO,GAAG,MAAM,CAAC;YAC9B,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,kBAAkB,CAAC,2BAA2B,EAAE,MAAM,CAAC,CAAC;QACvG,CAAC,CAAC;QAEF,MAAM,aAAa,GAAG,GAAG,EAAE;YAC1B,gBAAgB,CAAC,OAAO,EAAE,CAAC;QAC5B,CAAC,CAAC;QAEF,IAAI,UAAU,GAAG,IAAI,CAAC;QACtB,WAAW;aACT,MAAM,CAAC,kBAAkB,CAAC,UAAU,CAAC;aACrC,IAAI,CAAC,GAAG,EAAE;YACV,IAAI,UAAU,EAAE;gBACf,YAAY,CAAC,WAAW,CAAC,QAAQ,CAAC,eAAe,CAAC,iBAAiB,CAAC,CAAC,CAAC;aACtE;QACF,CAAC,CAAC;aACD,KAAK,CAAC,CAAC,KAAY,EAAE,EAAE;YACvB,IAAI,UAAU,EAAE;gBACf,UAAU,GAAG,KAAK,CAAC;gBACnB,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;aACxB;QACF,CAAC,CAAC,CAAC;QACJ,WAAW,CAAC,EAAE,CAAC,mBAAmB,CAAC,kBAAkB,EAAE,wBAAwB,CAAC,CAAC;QACjF,WAAW,CAAC,EAAE,CAAC,mBAAmB,CAAC,kBAAkB,EAAE,MAAM,CAAC,CAAC;QAC/D,WAAW,CAAC,EAAE,CAAC,mBAAmB,CAAC,yBAAyB,EAAE,OAAO,CAAC,CAAC;QACvE,WAAW,CAAC,EAAE,CAAC,mBAAmB,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;QACnD,WAAW,CAAC,EAAE,CAAC,kBAAkB,CAAC,2BAA2B,EAAE,cAAc,CAAC,CAAC;QAC/E,WAAW,CAAC,EAAE,CAAC,kBAAkB,CAAC,kBAAkB,EAAE,aAAa,CAAC,CAAC;QAErE,OAAO,GAAG,EAAE;YACX,WAAW,CAAC,GAAG,CAAC,mBAAmB,CAAC,kBAAkB,EAAE,wBAAwB,CAAC,CAAC;YAClF,WAAW,CAAC,GAAG,CAAC,mBAAmB,CAAC,kBAAkB,EAAE,MAAM,CAAC,CAAC;YAChE,WAAW,CAAC,GAAG,CAAC,mBAAmB,CAAC,yBAAyB,EAAE,OAAO,CAAC,CAAC;YACxE,WAAW,CAAC,GAAG,CAAC,mBAAmB,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;YACpD,WAAW,CAAC,GAAG,CAAC,kBAAkB,CAAC,2BAA2B,EAAE,cAAc,CAAC,CAAC;YAChF,UAAU,GAAG,KAAK,CAAC;QACpB,CAAC,CAAC;IACH,CAAC,EAAE,EAAE,CAAC,CAAC;IAEP,SAAS,CAAC,GAAG,EAAE;QACd,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,kBAAkB,CAAC,yBAAyB,EAAE,SAAS,CAAC,CAAC;IACxG,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC;IAEhB,SAAS,CAAC,GAAG,EAAE;QACd,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,kBAAkB,CAAC,2BAA2B,EAAE,YAAY,CAAC,OAAO,CAAC,CAAC;QACpH,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,kBAAkB,CAAC,uBAAuB,EAAE,aAAa,CAAC,KAAK,CAAC,CAAC;IAChH,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC;IAEf,IAAI,IAAI,CAAC;IACT,QAAQ,KAAK,EAAE;QACd,KAAK,QAAQ,CAAC,IAAI;YACjB,IAAI,GAAG,oBAAC,IAAI,IAAC,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,KAAK,GAAI,CAAC;YACpC,MAAM;QACP,KAAK,QAAQ,CAAC,KAAK;YAClB,IAAI,GAAG,oBAAC,KAAK,IAAC,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,KAAK,GAAI,CAAC;YACrC,MAAM;KACP;IAED,OAAO,CACN,oBAAC,kBAAkB,CAAC,QAAQ,IAAC,KAAK,EAAE,YAAY,CAAC,OAAO;QACvD,oBAAC,gBAAgB,CAAC,QAAQ,IAAC,KAAK,EAAE,SAAS;YAC1C,oBAAC,mBAAmB,CAAC,QAAQ,IAAC,KAAK,EAAE,CAAC,iBAAiB,EAAE,oBAAoB,CAAC;gBAC7E,oBAAC,eAAe,CAAC,QAAQ,IAAC,KAAK,EAAE,CAAC,QAAQ,EAAE,UAAU,EAAE,eAAe,CAAC;oBACvE,oBAAC,oBAAoB,IAAC,WAAW;wBAChC,oBAAC,aAAa,IAAC,KAAK,EAAE,KAAK;4BAC1B,oBAAC,QAAQ,IAAC,YAAY,EAAE,YAAY,EAAE,eAAe,EAAE,eAAe,GAAI;4BAC1E,oBAAC,QAAQ,IAAC,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,YAAY,EAAE,OAAO,EAAE,GAAG,EAAE,CAAC,eAAe,CAAC,KAAK,CAAC,GAAI;4BAC7E,oBAAC,MAAM,IAAC,SAAS,QAAC,IAAI,EAAE,YAAY,CAAC,KAAK,KAAK,aAAa,IAAI,OAAO;gCACrE,YAAY,CAAC,KAAK,KAAK,WAAW,IAAI,YAAY,CAAC,IAAI,IAAI,CAC3D,oBAAC,WAAW;;oCAAU,YAAY,CAAC,IAAI,CAAC,OAAO,CAAe,CAC9D;gCACA,YAAY,CAAC,KAAK,KAAK,OAAO,IAAI,CAClC,oBAAC,WAAW,wBAA4B,CACxC;gCACA,YAAY,CAAC,KAAK,KAAK,aAAa,IAAI,oBAAC,WAAW,sBAA0B;gCAC/E,oBAAC,aAAa;oCACZ,YAAY,CAAC,KAAK,KAAK,aAAa,IAAI,YAAY,CAAC,QAAQ,IAAI,CACjE;wCACC,oBAAC,cAAc,IAAC,OAAO,EAAE,aAAa,EAAE,KAAK,EAAE,YAAY,CAAC,QAAQ,CAAC,OAAO,GAAI;wCAChF,oBAAC,iBAAiB;4CAChB,WAAW,CAAC,YAAY,CAAC,QAAQ,CAAC,WAAW,CAAC;;4CAAK,WAAW,CAAC,YAAY,CAAC,QAAQ,CAAC,KAAK,CAAC,CACzE,CAClB,CACH;oCACA,YAAY,CAAC,KAAK,KAAK,WAAW,IAAI,CACtC;wCACC,oBAAC,cAAc,IAAC,OAAO,EAAE,eAAe,GAAI;wCAC5C,oBAAC,iBAAiB,+BAAyC,CACzD,CACH;oCACA,YAAY,CAAC,KAAK,KAAK,OAAO,IAAI,CAClC,oBAAC,iBAAiB,IAAC,KAAK,EAAC,OAAO,IAAE,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,CAAqB,CACjF,CACc;gCACf,YAAY,CAAC,KAAK,KAAK,OAAO,IAAI,CAClC,oBAAC,aAAa;oCACb,oBAAC,MAAM,IACN,KAAK,EAAC,MAAM,EACZ,OAAO,EAAE,GAAG,EAAE;4CACb,KAAK,CAAC,YAAY,CAAC,4DAA4D,CAAC,CAAC;wCAClF,CAAC,wBAGO;oCACT,oBAAC,MAAM,IACN,KAAK,EAAC,MAAM,EACZ,OAAO,EAAE,GAAG,EAAE;4CACb,UAAU,CAAC,KAAK,CAAC,CAAC;wCACnB,CAAC,WAGO,CACM,CAChB;gCACA,YAAY,CAAC,KAAK,KAAK,WAAW,IAAI,CACtC,oBAAC,aAAa;oCACb,oBAAC,MAAM,IACN,OAAO,EAAE,GAAG,EAAE;4CACb,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;wCAChC,CAAC,UAGO;oCACT,oBAAC,MAAM,IACN,OAAO,EAAE,GAAG,EAAE;4CACb,UAAU,CAAC,KAAK,CAAC,CAAC;wCACnB,CAAC,YAGO,CACM,CAChB,CACO;4BACR,IAAI,CACU,CACM,CACG,CACG,CACJ,CACC,CAC9B,CAAC;AACH,CAAC;AACD,aAAa;AACb,MAAM,IAAI,GAAG,cAAc,EAAE,CAAC,GAAG,CAAC,CAAC;AACnC,aAAa;AACb,QAAQ,CAAC,MAAM,CAAC,oBAAC,IAAI,OAAG,EAAE,QAAQ,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC","sourcesContent":["import React, { Dispatch, SetStateAction, useEffect, useState, useRef } from 'react';\nimport Voice from './Voice';\nimport Menu from './Menu';\nimport { ipcRenderer, shell } from 'electron';\nimport { AmongUsState } from '../common/AmongUsState';\nimport Settings from './settings/Settings';\nimport SettingsStore, { setSetting, setLobbySetting } from './settings/SettingsStore';\nimport { GameStateContext, SettingsContext, PlayerColorContext, HostSettingsContext } from './contexts';\nimport { ThemeProvider, Theme, StyledEngineProvider } from '@mui/material/styles';\nimport makeStyles from '@mui/styles/makeStyles';\nimport {\n\tAutoUpdaterState,\n\tIpcHandlerMessages,\n\tIpcMessages,\n\tIpcRendererMessages,\n\tIpcSyncMessages,\n} from '../common/ipc-messages';\nimport theme from './theme';\nimport SettingsIcon from '@mui/icons-material/Settings';\nimport RefreshSharpIcon from '@mui/icons-material/RefreshSharp';\nimport CloseIcon from '@mui/icons-material/Close';\nimport IconButton from '@mui/material/IconButton';\nimport Dialog from '@mui/material/Dialog';\nimport LinearProgress from '@mui/material/LinearProgress';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport DialogActions from '@mui/material/DialogActions';\nimport Button from '@mui/material/Button';\nimport prettyBytes from 'pretty-bytes';\nimport { IpcOverlayMessages } from '../common/ipc-messages';\nimport ReactDOM from 'react-dom';\nimport './css/index.css';\nimport 'source-code-pro/source-code-pro.css';\nimport 'typeface-varela/index.css';\nimport { DEFAULT_PLAYERCOLORS } from '../main/avatarGenerator';\nimport './language/i18n';\nimport { withNamespaces } from 'react-i18next';\nimport { ISettings } from '../common/ISettings';\n\n\ndeclare module '@mui/styles/defaultTheme' {\n\t// eslint-disable-next-line @typescript-eslint/no-empty-interface\n\tinterface DefaultTheme extends Theme { }\n}\n\n\nlet appVersion = '';\nif (typeof window !== 'undefined' && window.location) {\n\tconst query = new URLSearchParams(window.location.search.substring(1));\n\tappVersion = ' v' + query.get('version') || '';\n}\n\nconst useStyles = makeStyles(() => ({\n\troot: {\n\t\tposition: 'absolute',\n\t\twidth: '100vw',\n\t\theight: theme.spacing(3),\n\t\tbackgroundColor: '#1d1a23',\n\t\ttop: 0,\n\t\tWebkitAppRegion: 'drag',\n\t\tzIndex: 100,\n\t},\n\ttitle: {\n\t\twidth: '100%',\n\t\ttextAlign: 'center',\n\t\tdisplay: 'block',\n\t\theight: theme.spacing(3),\n\t\tlineHeight: theme.spacing(3),\n\t\tcolor: theme.palette.primary.main,\n\t},\n\tbutton: {\n\t\tWebkitAppRegion: 'no-drag',\n\t\tmarginLeft: 'auto',\n\t\tpadding: 0,\n\t\tposition: 'absolute',\n\t\ttop: 0,\n\t},\n}));\n\ninterface TitleBarProps {\n\tsettingsOpen: boolean;\n\tsetSettingsOpen: Dispatch<SetStateAction<boolean>>;\n}\n\nconst RawTitleBar: React.FC<TitleBarProps> = function ({ settingsOpen, setSettingsOpen }: TitleBarProps) {\n\tconst classes = useStyles();\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<span className={classes.title} style={{ marginLeft: 10 }}>\n\t\t\t\tBetterCrewLink{appVersion}\n\t\t\t</span>\n\t\t\t<IconButton\n\t\t\t\tclassName={classes.button}\n\t\t\t\tstyle={{ left: 0 }}\n\t\t\t\tsize=\"small\"\n\t\t\t\tonClick={() => setSettingsOpen(!settingsOpen)}\n\t\t\t>\n\t\t\t\t<SettingsIcon htmlColor=\"#777\" />\n\t\t\t</IconButton>\n\t\t\t<IconButton\n\t\t\t\tclassName={classes.button}\n\t\t\t\tstyle={{ left: 22 }}\n\t\t\t\tsize=\"small\"\n\t\t\t\tonClick={() => ipcRenderer.send('reload')}\n\t\t\t>\n\t\t\t\t<RefreshSharpIcon htmlColor=\"#777\" />\n\t\t\t</IconButton>\n\t\t\t<IconButton\n\t\t\t\tclassName={classes.button}\n\t\t\t\tstyle={{ right: 0 }}\n\t\t\t\tsize=\"small\"\n\t\t\t\tonClick={() => ipcRenderer.send(IpcMessages.QUIT_CREWLINK)}\n\t\t\t>\n\t\t\t\t<CloseIcon htmlColor=\"#777\" />\n\t\t\t</IconButton>\n\t\t</div>\n\t);\n};\n\nconst TitleBar = React.memo(RawTitleBar);\n\nenum AppState {\n\tMENU,\n\tVOICE,\n}\n// @ts-ignore\nexport default function App({ t }): JSX.Element {\n\tconst [state, setState] = useState<AppState>(AppState.MENU);\n\tconst [gameState, setGameState] = useState<AmongUsState>({} as AmongUsState);\n\tconst [settingsOpen, setSettingsOpen] = useState(false);\n\tconst [diaOpen, setDiaOpen] = useState(true);\n\tconst [error, setError] = useState('');\n\tconst [updaterState, setUpdaterState] = useState<AutoUpdaterState>({\n\t\tstate: 'unavailable',\n\t});\n\tconst playerColors = useRef<string[][]>(DEFAULT_PLAYERCOLORS);\n\tconst overlayInitCount = useRef<number>(0);\n\n\tconst [settings, setSettings] = useState(SettingsStore.store);\n\tconst [hostLobbySettings, setHostLobbySettings] = useState(settings.localLobbySettings);\n\tuseEffect(() => {\n\t\tSettingsStore.onDidAnyChange((newValue, _) => { setSettings(newValue as ISettings) });\n\t}, []);\n\n\tuseEffect(() => {\n\t\tipcRenderer.send(IpcMessages.SEND_TO_OVERLAY, IpcOverlayMessages.NOTIFY_PLAYERCOLORS_CHANGED, playerColors.current);\n\t\tipcRenderer.send(IpcMessages.SEND_TO_OVERLAY, IpcOverlayMessages.NOTIFY_SETTINGS_CHANGED, SettingsStore.store);\n\t\tipcRenderer.send(IpcMessages.SEND_TO_OVERLAY, IpcOverlayMessages.NOTIFY_GAME_STATE_CHANGED, gameState);\n\t}, [overlayInitCount.current]);\n\n\tuseEffect(() => {\n\t\tconst onOpen = (_: Electron.IpcRendererEvent, isOpen: boolean) => {\n\t\t\tsetState(isOpen ? AppState.VOICE : AppState.MENU);\n\t\t};\n\t\tconst onState = (_: Electron.IpcRendererEvent, newState: AmongUsState) => {\n\t\t\tsetGameState(newState);\n\t\t};\n\n\t\tconst onError = (_: Electron.IpcRendererEvent, error: string) => {\n\t\t\tshouldInit = false;\n\t\t\tsetError(error);\n\t\t};\n\t\tconst onAutoUpdaterStateChange = (_: Electron.IpcRendererEvent, state: AutoUpdaterState) => {\n\t\t\tsetUpdaterState((old) => ({ ...old, ...state }));\n\t\t};\n\t\tconst onColorsChange = (_: Electron.IpcRendererEvent, colors: string[][]) => {\n\t\t\tconsole.log('RECIEVED COLORS');\n\t\t\tplayerColors.current = colors;\n\t\t\tipcRenderer.send(IpcMessages.SEND_TO_OVERLAY, IpcOverlayMessages.NOTIFY_PLAYERCOLORS_CHANGED, colors);\n\t\t};\n\n\t\tconst onOverlayInit = () => {\n\t\t\toverlayInitCount.current++;\n\t\t};\n\n\t\tlet shouldInit = true;\n\t\tipcRenderer\n\t\t\t.invoke(IpcHandlerMessages.START_HOOK)\n\t\t\t.then(() => {\n\t\t\t\tif (shouldInit) {\n\t\t\t\t\tsetGameState(ipcRenderer.sendSync(IpcSyncMessages.GET_INITIAL_STATE));\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((error: Error) => {\n\t\t\t\tif (shouldInit) {\n\t\t\t\t\tshouldInit = false;\n\t\t\t\t\tsetError(error.message);\n\t\t\t\t}\n\t\t\t});\n\t\tipcRenderer.on(IpcRendererMessages.AUTO_UPDATER_STATE, onAutoUpdaterStateChange);\n\t\tipcRenderer.on(IpcRendererMessages.NOTIFY_GAME_OPENED, onOpen);\n\t\tipcRenderer.on(IpcRendererMessages.NOTIFY_GAME_STATE_CHANGED, onState);\n\t\tipcRenderer.on(IpcRendererMessages.ERROR, onError);\n\t\tipcRenderer.on(IpcOverlayMessages.NOTIFY_PLAYERCOLORS_CHANGED, onColorsChange);\n\t\tipcRenderer.on(IpcOverlayMessages.REQUEST_INITVALUES, onOverlayInit);\n\n\t\treturn () => {\n\t\t\tipcRenderer.off(IpcRendererMessages.AUTO_UPDATER_STATE, onAutoUpdaterStateChange);\n\t\t\tipcRenderer.off(IpcRendererMessages.NOTIFY_GAME_OPENED, onOpen);\n\t\t\tipcRenderer.off(IpcRendererMessages.NOTIFY_GAME_STATE_CHANGED, onState);\n\t\t\tipcRenderer.off(IpcRendererMessages.ERROR, onError);\n\t\t\tipcRenderer.off(IpcOverlayMessages.NOTIFY_PLAYERCOLORS_CHANGED, onColorsChange);\n\t\t\tshouldInit = false;\n\t\t};\n\t}, []);\n\n\tuseEffect(() => {\n\t\tipcRenderer.send(IpcMessages.SEND_TO_OVERLAY, IpcOverlayMessages.NOTIFY_GAME_STATE_CHANGED, gameState);\n\t}, [gameState]);\n\n\tuseEffect(() => {\n\t\tipcRenderer.send(IpcMessages.SEND_TO_OVERLAY, IpcOverlayMessages.NOTIFY_PLAYERCOLORS_CHANGED, playerColors.current);\n\t\tipcRenderer.send(IpcMessages.SEND_TO_OVERLAY, IpcOverlayMessages.NOTIFY_SETTINGS_CHANGED, SettingsStore.store);\n\t}, [settings]);\n\n\tlet page;\n\tswitch (state) {\n\t\tcase AppState.MENU:\n\t\t\tpage = <Menu t={t} error={error} />;\n\t\t\tbreak;\n\t\tcase AppState.VOICE:\n\t\t\tpage = <Voice t={t} error={error} />;\n\t\t\tbreak;\n\t}\n\n\treturn (\n\t\t<PlayerColorContext.Provider value={playerColors.current}>\n\t\t\t<GameStateContext.Provider value={gameState}>\n\t\t\t\t<HostSettingsContext.Provider value={[hostLobbySettings, setHostLobbySettings]}>\n\t\t\t\t\t<SettingsContext.Provider value={[settings, setSetting, setLobbySetting]}>\n\t\t\t\t\t\t<StyledEngineProvider injectFirst>\n\t\t\t\t\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t\t\t\t\t<TitleBar settingsOpen={settingsOpen} setSettingsOpen={setSettingsOpen} />\n\t\t\t\t\t\t\t\t<Settings t={t} open={settingsOpen} onClose={() => setSettingsOpen(false)} />\n\t\t\t\t\t\t\t\t<Dialog fullWidth open={updaterState.state !== 'unavailable' && diaOpen}>\n\t\t\t\t\t\t\t\t\t{updaterState.state === 'available' && updaterState.info && (\n\t\t\t\t\t\t\t\t\t\t<DialogTitle>Update v{updaterState.info.version}</DialogTitle>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{updaterState.state === 'error' && (\n\t\t\t\t\t\t\t\t\t\t<DialogTitle>Updater Error</DialogTitle>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{updaterState.state === 'downloading' && <DialogTitle>Updating...</DialogTitle>}\n\t\t\t\t\t\t\t\t\t<DialogContent>\n\t\t\t\t\t\t\t\t\t\t{updaterState.state === 'downloading' && updaterState.progress && (\n\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t<LinearProgress variant={'determinate'} value={updaterState.progress.percent} />\n\t\t\t\t\t\t\t\t\t\t\t\t<DialogContentText>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{prettyBytes(updaterState.progress.transferred)} / {prettyBytes(updaterState.progress.total)}\n\t\t\t\t\t\t\t\t\t\t\t\t</DialogContentText>\n\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{updaterState.state === 'available' && (\n\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t<LinearProgress variant={'indeterminate'} />\n\t\t\t\t\t\t\t\t\t\t\t\t<DialogContentText>Update now or later?</DialogContentText>\n\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{updaterState.state === 'error' && (\n\t\t\t\t\t\t\t\t\t\t\t<DialogContentText color=\"error\">{String(updaterState.error)}</DialogContentText>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</DialogContent>\n\t\t\t\t\t\t\t\t\t{updaterState.state === 'error' && (\n\t\t\t\t\t\t\t\t\t\t<DialogActions>\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"grey\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tshell.openExternal(\"https://github.com/OhMyGuus/BetterCrewLink/releases/latest\");\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tDownload Manually\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"grey\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetDiaOpen(false);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tSkip\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t</DialogActions>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{updaterState.state === 'available' && (\n\t\t\t\t\t\t\t\t\t\t<DialogActions>\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tipcRenderer.send('update-app');\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tNow\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetDiaOpen(false);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tLater\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t</DialogActions>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Dialog>\n\t\t\t\t\t\t\t\t{page}\n\t\t\t\t\t\t\t</ThemeProvider>\n\t\t\t\t\t\t</StyledEngineProvider>\n\t\t\t\t\t</SettingsContext.Provider>\n\t\t\t\t</HostSettingsContext.Provider>\n\t\t\t</GameStateContext.Provider>\n\t\t</PlayerColorContext.Provider>\n\t);\n}\n// @ts-ignore\nconst App2 = withNamespaces()(App);\n// @ts-ignore\nReactDOM.render(<App2 />, document.getElementById('app'));\n"]}